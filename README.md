# Лабораторная работа № 6 Интеграция рекламных сервисов в интерактивное приложение.
Отчет по лабораторной работе #6 выполнила:
- Додонова Елена Игоревна
- РИ-300002
Отметка о выполнении заданий (заполняется студентом):

| Задание | Выполнение | Баллы |
| ------ | ------ | ------ |
| Задание 1 | * | 60 |
| Задание 2 | * | 20 |
| Задание 3 | * | 20 |

знак "*" - задание выполнено; знак "#" - задание не выполнено;

Работу проверили:
- к.т.н., доцент Денисов Д.В.
- к.э.н., доцент Панов М.А.
- ст. преп., Фадеев В.О.

## Цель работы
создание интерактивного приложения с рейтинговой системой пользователя и интеграция игровых сервисов в готовое приложение.

## Задание 1
### Используя видео-материалы практических работ 1-5 повторить реализацию приведенного ниже функционала:

– 1 Практическая работа «Интеграция баннерной рекламы»

– 2 Практическая работа «Интеграция видеорекламы»

– 3 Практическая работа «Показ видеорекламы пользователю за вознаграждение»

– 4 Практическая работа «Создание внутриигрового магазина»

– 5 Практическая работа «Система антиблокировки рекламы»

### – 1 Практическая работа «Интеграция баннерной рекламы»
Ход работы:
1) На платформе Yandex Game подключим возможность монетизации.

2) Создадим RTB-блок.

3) Настроим проект для интеграции с рекламой. Для этого полученный номер RTB-блока добавим в ячейку баннерной статистической рекламы. Поставим галочку для отображения рекламы внутри игры.


4) Сделаем билд проекта и загрузим на Yandex Game. При запуске и между сессиями можно наблюдать рекламу.





### – 2 Практическая работа «Интеграция видеорекламы»
Ход работы:
1) Добавим в скрипты CheckConnectYG и DragonPicker строчку кода, благодаря которой будет проигрываться реклама во время игры.

```
YandexGame.RewVideoShow(0);
```

2) Во всех объектах YandexGame на сценах отмечаем, что при просмотре рекламы пользователем, игра будет останавливаться на паузу.


3) Делаем билд, загружаем на платформу и видим наличие видеорекламы после проигрыша.

### – 3 Практическая работа «Показ видеорекламы пользователю за вознаграждение»
Ход работы:
1) Реализуем показ рекламы за вознаграждение. Создадим и напишем новый скрипт и подключим его к YandexManager, этот скрипт будет отвечать за показ рекламы за вознограждение.

```
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using YG;

public class ADReward : MonoBehaviour
{
    private void OnEnable() => YandexGame.CloseVideoEvent += Rewarded;
    private void OnDisable() => YandexGame.CloseVideoEvent += Rewarded;

    void Rewarded(int id)
    {
        if(id == 1)
        {
            Debug.Log("Пользователь получил награду");
        }
        else
        {
            Debug.Log("Пользователь остался без награды");
        }
    }
    
    public void OpenAD()
    {
        YandexGame.RewVideoShow(Random.Range(0,2));
    }
}
```

2) Создадим и настроим кнопку, чтоб пользователь мог при нажатии на нее посмотреть рекламу за вознограждение.

3) Сделаем билд и загрузим на Yandex Игры. После просмотра рекламы пользователю дается вознограждение.


### – 4 Практическая работа «Создание внутриигрового магазина»
Ход работы:
1) Добавляем на сцену префаб OnePurchase из YandexGame, с помощью которого пользователь сможет делать внутриигровые покупки.

2) Настраиваем покупку алмазов на Yandex Игры и в юнити подключаем ID

3) Делаем билд, загружаем, и при нажатии на покупку алмазов у нас возникает ошибка, так как пока в черновике мы не можем совершить покупку.



### – 5 Практическая работа «Система антиблокировки рекламы»
Ход работы:
1) Ставим галочку на проверку адблока


## Задание 2
### Добавить в приложение интерфейс для вывода статуса наличия игрока в сети (онлайн или офлайн).
Ход работы:
1) Напишем код в скрипт CheckConnectYG

```
[SerializeField] private TextMeshProUGUI userStatusOnOff;

public void CheckSDK()
{
    if (YandexGame.auth)
    {
        userStatusOnOff.text = "Online";
        Debug.Log("User authorization ok");
    }
    else
    {
        Debug.Log("User not authorization");
        YandexGame.AuthDialog();
    }
}
```

2) Создадим текст и подключим к нему код выше через Yandex Manager. В итоге у нас будет меняться текст при подключении с Offline на Online.


## Задание 3
### Предложить наиболее подходящий на ваш взгляд способ монетизации игры D.Picker. Дать развернутый ответ с комментариями.
Ход работы:






## Выводы
В ходе данной лабораторной работы мы создали систему покупок, работающую через валюту Яндекс Деньги.
Создали баннерную рекламу, отображающуюся внизу экрана.
Также создали систему вознаграждения за просмотр видеорекламы.
Добавили систему антиблокировки рекламы.

